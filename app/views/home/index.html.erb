<% if user_signed_in? &&  current_user.role == "HR"%>

  <h1>Manager List</h1>
  <table class="table table-hover table-striped">
    <thead class="table-dark">
    <tr>
      <th>Name</th>
      <th>CNIC</th>
      <th>Email</th>
      <th>Joining Date</th>
      <th>Role</th>
      <th>Manager ID</th>
      <th colspan="5"></th>
    </tr>
    </thead>

      <tbody>
      <% @users.each do |user| %>
        <% if user.role == "Manager" %>
        <tr>
          <td><%= user.name %></td>
          <td><%= user.cnic %></td>
          <td><%= user.email %></td>
          <td><%= user.join_date %></td>
          <td><%= user.role %></td>
          <td><%= user.manager_id %></td>
          <td><%= link_to 'Edit',edit_path(user), class:"btn btn-primary" %></td>
          <td><%= link_to "Delete", user, method: :delete, data: { confirm: "Are you sure"}, class: "btn btn-danger" %></td>
        </tr>
        <%end %>
      <% end %>

      </tbody>
  </table>

  <h1>Employee List</h1>
  <table class="table table-hover table-striped">
    <thead class="table-dark">
    <tr>
      <th>Name</th>
      <th>CNIC</th>
      <th>Email</th>
      <th>Joining Date</th>
      <th>Role</th>
      <th>Assigned Manager</th>
      <th colspan="5"></th>
    </tr>
    </thead>

    <tbody>
    <% @users.each do |user| %>
      <% if user.role == "Employee" %>
        <tr>
          <td><%= user.name %></td>
          <td><%= user.cnic %></td>
          <td><%= user.email %></td>
          <td><%= user.join_date %></td>
          <td><%= user.role %></td>
          <td><%= user.manager_id %></td>
          <td><%= link_to 'Edit',edit_path(user), class:"btn btn-primary" %></td>
          <td><%= link_to "Delete", user, method: :delete, data: { confirm: "Are you sure"}, class: "btn btn-danger" %></td>
        </tr>
      <%end %>
    <% end %>


    </tbody>
  </table>
  <%= link_to 'Add new employee', signup_path, class:"btn btn-primary" %>&nbsp;
  <%= link_to "View all responses", evaluation_forms_index_path, class:"btn btn-primary"  %>



  <% elsif user_signed_in? &&  current_user.role == "Employee"%>

    <table class="table table-hover table-striped">
      <thead class="table-dark">
      <tr>
        <th>Name</th>
        <th>CNIC</th>
        <th>Email</th>
        <th>Joining Date</th>
        <th>Role</th>
        <th>Assigned Manager</th>
        <th colspan="5"></th>
      </tr>
      </thead>
      <tbody>
          <tr>
            <td><%= current_user.name %></td>
            <td><%= current_user.cnic %></td>
            <td><%= current_user.email %></td>
            <td><%= current_user.join_date %></td>
            <td><%= current_user.role %></td>
            <td><%= current_user.manager_id %></td>
            <td><%= link_to 'Fill out evaluation forms', new_evaluation_form_path , class:"btn btn-primary" %></td>
           </tr>
      </tbody>
    </table>
<% elsif user_signed_in? &&  current_user.role == "Manager"%>

  <table class="table table-hover table-striped">
    <thead class="table-dark">
    <tr>
      <th>Name</th>
      <th>CNIC</th>
      <th>Email</th>
      <th>Joining Date</th>
      <th>Role</th>
      <th>Manager ID</th>
      <th colspan="5"></th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td><%= current_user.name %></td>
      <td><%= current_user.cnic %></td>
      <td><%= current_user.email %></td>
      <td><%= current_user.join_date %></td>
      <td><%= current_user.role %></td>
      <td><%= current_user.manager_id %></td>
    </tr>
    </tbody>
  </table>
  <h1>Manager's Employees</h1>
  <table class="table table-hover table-striped">
    <thead class="table-dark">
    <tr>
      <th>Name</th>
      <th>CNIC</th>
      <th>Email</th>
      <th>Joining Date</th>
      <th>Role</th>

      <th colspan="5"></th>
    </tr>
    </thead>
    <tbody>
    <tbody>
    <% @users.each do |user| %>
      <% if user.role == "Employee" && current_user.manager_id == user.manager_id%>
        <tr>
          <td><%= user.name %></td>
          <td><%= user.cnic %></td>
          <td><%= user.email %></td>
          <td><%= user.join_date %></td>
          <td><%= user.role %></td>
          <td><%= link_to 'Fill out evaluation forms', new_evaluation_form_path , class:"btn btn-primary" %></td>
        </tr>
      <%end %>
    <% end %>
    </tbody>

    </table>
<% else %>
  <h1>No user logged in</h1>
<% end %>